[Descriptions without Digital Objects since inception]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 16 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index="opa" latest=now MainType=USAGE (Type=WebApp OR Type=API) Source={DescriptionsOnly} | top limit=1000 NaId | eval filename="http://research.archives.gov/id/".NaId | fields filename count | rename filename as "File Name", count as Frequency

[Descriptions without Digital Objects in the last week]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 16 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index="opa" earliest=-w latest=now MainType=USAGE (Type=WebApp OR Type=API) Source={DescriptionsOnly} | top limit=1000 NaId | eval filename="http://research.archives.gov/id/".NaId | fields filename count | rename filename as "File Name", count as Frequency

[Descriptions with Digital Objects since inception]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 16 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index="opa" latest=now MainType=USAGE (Type=WebApp OR Type=API) Source={OnlineHoldings} | top limit=1000 NaId | eval filename="http://research.archives.gov/id/".NaId | fields filename count | rename filename as "File Name", count as Frequency

[Descriptions with Digital Objects in the last week]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 16 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index="opa" earliest=-w latest=now MainType=USAGE (Type=WebApp OR Type=API) Source={OnlineHoldings} | top limit=1000 NaId | eval filename="http://research.archives.gov/id/".NaId | fields filename count | rename filename as "File Name", count as Frequency

[Characteristics of queries made through the API]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 16 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index="opa" MainType="*" Type=API| top limit=0 Query MainType queryTime | eval status = if(MainType == "ERROR", "YES", "NO") | fields Query status queryTime | rename status as "ERROR" queryTime as "Response Time"

[Characteristics of exports from the system]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 16 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = | dbquery opadb limit=1000 "SELECT api_type, bulk_export, export_format, export_type, file_size, include_content, include_metadata, include_tags, include_thumbnails, include_transcriptions, total_recs_processed FROM accounts_exports" \
| eval "Citizen contributed data" = if(include_tags == "true", if(include_transcriptions == "true", "tags, transcriptions", "tags"), if(include_transcriptions == "true", "transcriptions", ""))\
| eval "Type of export" = if(bulk_export == "true", if(api_type == "iapi", "Bulk, Normal", "Bulk, API"), if(api_type == "iapi", "Non-bulk, Normal", "Non-bulk, API"))\
| eval "Type of image setting" = if(include_thumbnails == "true", \
									if(include_metadata == "true", \
										if(include_content == "true",\
											"thumbnails, metadata, content",\
											"thumbnails, metadata"),\
										if(include_content == "true",\
											"thumbnails, content",\
											"thumbnails")\
									),\
									if(include_metadata == "true",\
										if(include_content == "true",\
											"metadata, content", \
											"metadata"),\
										if(include_content == "true",\
											"content",\
											"")\
									)\
								)\
| fields total_recs_processed export_format export_type file_size "Type of export" "Citizen contributed data" "Type of image setting"\
| rename export_type as "Type of results exported", file_size as "Total file size", export_format as "Type of formats exported", total_recs_processed as "Number of records exported"

[Errors in the last hour]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
alert.track = 0
cron_schedule = 0 16 * * 2
enableSched = 1

[No. of times filter options was accessed from Advanced Search]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 16 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index="opa" MainType=USAGE Type=WebApp Query=*f.* searchType=advanced | eval filter=filterName." - ".filterData | top limit=0 filter | fields filter count | rename filter as "Filter", count as "No. of times"

[No. of times records are exported from the system]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 16 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index=opa sourcetype=log4j_usage MainType=USAGE Action=export | top limit=0 Date | eval Text="No. of times that records are exported from the system" | fields Date count | rename count as "Frequency" | sort Date asc

[Number of queries Daily]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 16 * * 2
display.general.timeRangePicker.show = 0
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index=opa sourcetype=log4j_usage (Type=WebApp OR Type=API OR Type=USAGE) Query=*"q="* earliest=-7d@d | timechart span=1d count | rename _time as "t" | eval day=strftime(t, "%m/%d/%Y") | fields day count | rename day as "Day", count as "Number of queries"

[Number of queries Weekly]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 16 * * 2
display.general.timeRangePicker.show = 0
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index=opa sourcetype=log4j_usage Query=*"q="* | bucket _time span=7d | eval starttime=strftime(_time, "%D") | eval endtime=strftime(_time+518400, "%D") | eval Week=starttime + " - " + endtime | chart count by Week| sort Week | rename count as "Number of queries"

[Number of queries generated through the API]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 16 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index="opa" MainType=USAGE Type=API earliest=-w | top limit=0 Type | eval Text="No. of queries generated through the API in last 1 week" | fields Text count

[Number of saved lists created monthly]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.timeRangePicker.show = 0
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = | dbquery opadb limit=1000 "SELECT AC.user_name, list.`No. of lists created`\
FROM		accounts AC, (SELECT account_id, COUNT(* ) as `No. of lists created`\
FROM		accounts_lists \
WHERE		list_ts >= NOW() - INTERVAL 1 MONTH\
GROUP BY	account_id) list\
WHERE		AC.account_id = list.account_id"

[Number of saved lists created since inception]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.timeRangePicker.show = 0
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = | dbquery opadb limit=1000 "SELECT AC.user_name, list.`No. of lists created`\
FROM		accounts AC, (SELECT account_id, COUNT(* ) as `No. of lists created`\
FROM		accounts_lists \
GROUP BY	account_id) list\
WHERE		AC.account_id = list.account_id"

[Number of saved lists created weekly]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = | dbquery opadb limit=1000 "SELECT AC.user_name, list.`No. of lists created`\
FROM		accounts AC, (SELECT account_id, COUNT(* ) as `No. of lists created`\
FROM		accounts_lists \
WHERE		list_ts >= NOW() - INTERVAL 1 WEEK\
GROUP BY	account_id) list\
WHERE		AC.account_id = list.account_id"

[Number of saved lists created yearly]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.timeRangePicker.show = 0
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = | dbquery opadb limit=1000 "SELECT AC.user_name, list.`No. of lists created`\
FROM		accounts AC, (SELECT account_id, COUNT(* ) as `No. of lists created`\
FROM		accounts_lists \
WHERE		list_ts >= NOW() - INTERVAL 1 YEAR\
GROUP BY	account_id) list\
WHERE		AC.account_id = list.account_id"

[Number of times the Advanced Search Screen is accessed]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index="opa" sourcetype=apachelog path=/views/directives/advancedsearch/advancedSearch.html | top limit=0 path | eval Text="No. of times the Advanced Search Screen was accessed" | fields Text count | rename count as Count

[Number of times the filter options are accessed]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index=opa sourcetype=log4j_usage (f_fileFormat=* OR f_dateRangeFacet=* OR f_materialsType=* OR f_locationIds=* OR f_level=* OR f_oldScope=*) | eval filters = if(isnotnull(f_fileFormat),"File Format - "+f_fileFormat,"") +  if(isnotnull(f_dateRangeFacet),",Date - "+f_dateRangeFacet,"") + if(isnotnull(f_materialsType), ",Type of Materials - "+f_materialsType,"") + if(isnotnull(f_locationIds),",Location - "+f_locationIds,"") + if(isnotnull(f_level),",Level of Description - "+f_level,"") + if(isnotnull(f_oldScope),",Data Source - "+f_oldScope,"") | makemv delim="," filters | top limit=0 filters | fields filters count | rename filters as "Filter", count as "No. of times"

[Number of unique contributors via the API]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index="opa" MainType=USAGE Type=API AnnotationType="*" username="*" Action=save | dedup username | stats count | rename count as "Count" | eval Type="No. of unique contributors via the API " | fields Type Count

[Number of user contributions via the API]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index="opa" MainType=USAGE Type=API AnnotationType="*" Action=save | top AnnotationType | fields AnnotationType count | rename AnnotationType as "Contribution Type", count as "No. of User Contributions via API"

[Reasons for removing contributions]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = | dbquery opadb limit=1000 "SELECT AR.reason AS Reason, REPLACE(REPLACE(AL.annotation_type, 'TR', 'Transcriptions'), 'TG', 'Tags') AS 'Contribution Type',count(*) AS Count FROM annotation_log AL, annotation_reasons AR WHERE AL.reason_id = AR.reason_id AND AL.action = 'REMOVE' GROUP BY AL.annotation_type, AR.reason"

[Reasons for restoring contributions]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = | dbquery opadb limit=1000 "SELECT REPLACE(REPLACE(AL.annotation_type, 'TR', 'Transcriptions'), 'TG', 'Tags') AS 'Contribution Type', AR.reason AS Reason,count(*) AS 'No. of Restored Contributions' FROM annotation_log AL, annotation_reasons AR WHERE AL.reason_id = AR.reason_id AND AL.action = 'RESTORE' GROUP BY AL.annotation_type, AR.reason"

[Space Report]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
dispatch.earliest_time = -24h@h
dispatch.latest_time = now
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = sourcetype="df"  | dedup Filesystem, host | stats sum(TotalMBytes) as TotalSpace, sum(FreeMBytes) as TotalUsedSpace by host | eval "Space Reserved for Maintenance"=1000| eval "Total Available/Usable Space"=TotalSpace-TotalUsedSpace| rename TotalSpace as "Total Space", TotalUsedSpace  as "Total Used Space"

[Tabbed Groupings Access - Last one month]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index="opa" earliest=-mon gov.nara.opa.api.services.impl.search.BriefResultsSearchServiceImpl| top limit=20 tabType | fields tabType, count |  rename tabType as "Tab name", count as "No. of times accessed"

[Tabbed Groupings Access - Last one week]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index="opa" earliest=-w gov.nara.opa.api.services.impl.search.BriefResultsSearchServiceImpl| top limit=20 tabType | fields tabType, count |  rename tabType as "Tab name", count as "No. of times accessed"

[Tabbed Groupings Access - Last one year]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index="opa" earliest=-y gov.nara.opa.api.services.impl.search.BriefResultsSearchServiceImpl| top limit=20 tabType | fields tabType, count |  rename tabType as "Tab name", count as "No. of times accessed"

[Top 10 contributors with username (excluding NARA users) Clone]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
description = Demo to NARA
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = | dbquery opadb limit=1000 \
"SELECT accounts.user_name AS 'User Name', annotations_count.All AS 'Total No. of contributions'\
 FROM ( \
        SELECT annotations.account_id, SUM(annotations.count) AS "All"  \
        FROM ( \
                SELECT account_id, COUNT(*) as count \
                FROM  annotation_tags \
                GROUP BY account_id \
                UNION \
                SELECT account_id, COUNT(*) as count \
                FROM annotation_transcriptions \
                GROUP BY account_id \
              ) annotations \
       GROUP BY account_id ) annotations_count\
       , accounts \
WHERE annotations_count.account_id = accounts.account_id AND accounts.is_nara_staff = FALSE ORDER BY annotations_count.All DESC"

[Top 100 contributors with username (excluding NARA users)]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = | dbquery opadb limit=1000 \
"SELECT accounts.user_name AS 'User Name', annotations_count.All AS 'Total No. of contributions'\
 FROM ( \
        SELECT annotations.account_id, SUM(annotations.count) AS "All"  \
        FROM ( \
                SELECT account_id, COUNT(*) as count \
                FROM  annotation_tags \
                GROUP BY account_id \
                UNION \
                SELECT account_id, COUNT(*) as count \
                FROM annotation_transcriptions \
                GROUP BY account_id \
              ) annotations \
       GROUP BY account_id ) annotations_count\
       , accounts \
WHERE annotations_count.account_id = accounts.account_id AND accounts.is_nara_staff = FALSE ORDER BY annotations_count.All DESC"

[Top 100 records that contain transcriptions with most edits]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = | dbquery opadb limit=100 "(SELECT a.na_id, a.object_id, a.page_num, CONVERT(t.opa_title USING utf8) as 'Title', COUNT(*) AS 'Total no. of EDITS to Transcription'\
                            FROM annotation_log a, opa_titles t \
                           WHERE a.annotation_type='TR' and a.na_id=t.na_id and a.action IN ('add', 'update') \
                           GROUP BY na_id,object_id ORDER BY COUNT(*) DESC)  \
                           UNION ALL \
                           (SELECT null, null, null, 'Average No. of edits per transcription', (select  count(*) from annotation_log where annotation_type='TR' and action IN ('add', 'update'))/(select count(*) from (select  * from annotation_log where annotation_type='TR' and action IN ('add', 'update') group by na_id, object_id) sub) FROM DUAL)"

[Top 1000 search terms in the last month]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.timeRangePicker.show = 0
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index="opa" sourcetype=log4j_usage earliest=-mon | top limit=1000 q | fields q, count | rename q as "Search Term", count as Frequency

[Top 1000 search terms in the last year]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.timeRangePicker.show = 0
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index="opa" earliest=-y latest=now sourcetype=log4j_usage | top limit=1000 q | fields q, count | rename q as "Search Term", count as Frequency

[Top 1000 search terms since inception]
action.email = 1
action.email.include.results_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.timeRangePicker.show = 0
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index="opa" sourcetype=log4j_usage | top limit=1000 q | fields q, count | rename q as "Search Term", count as Frequency

[Top 1000 search terms that return zero results]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index="opa" latest=now (Type=WebApp OR Type=API) totalResults=0 | top limit=1000 q| fields q count | rename q as "Search Term", count as Frequency

[Total number of contributions broken down by type of contribution]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = | dbquery opadb limit=1000 \
"SELECT d_type as `Contribution Type`, count1 as 'THIS WEEK', count2 as 'THIS MONTH', count3 as 'THIS YEAR', count4 as 'SINCE INCEPTION'\
 FROM ( \
        SELECT 'Transcriptions' as d_type, (SELECT COUNT(*)           \
        FROM annotation_transcriptions  WHERE annotation_ts >= NOW() - INTERVAL 1 WEEK) as count1,\
        (SELECT COUNT(*)           \
        FROM annotation_transcriptions  WHERE annotation_ts >= NOW() - INTERVAL 1 MONTH) as count2,\
        (SELECT COUNT(*)           \
        FROM annotation_transcriptions  WHERE annotation_ts >= NOW() - INTERVAL 1 YEAR) as count3,\
        (SELECT COUNT(*)           \
        FROM annotation_transcriptions  ) as count4 \
        FROM DUAL                \
        UNION ALL         \
        SELECT 'Tags' as d_type, (SELECT COUNT(*)          \
        FROM annotation_tags WHERE annotation_ts >= NOW() - INTERVAL 1 WEEK) as count1,\
        (SELECT COUNT(*)          \
        FROM annotation_tags WHERE annotation_ts >= NOW() - INTERVAL 1 MONTH) as count2,\
         (SELECT COUNT(*)          \
        FROM annotation_tags WHERE annotation_ts >= NOW() - INTERVAL 1 YEAR) as count3,\
         (SELECT COUNT(*)          \
        FROM annotation_tags ) as count4\
        FROM DUAL\
 ) sub\
 UNION ALL\
 SELECT 'All', sum(total.count1), sum(total.count2), sum(total.count3), sum(total.count4)\
 FROM (\
        SELECT (SELECT COUNT(*) FROM annotation_transcriptions  WHERE annotation_ts >= NOW() - INTERVAL 1 WEEK) as count1,\
        (SELECT COUNT(*) FROM annotation_transcriptions  WHERE annotation_ts >= NOW() - INTERVAL 1 MONTH) as count2,\
        (SELECT COUNT(*) FROM annotation_transcriptions  WHERE annotation_ts >= NOW() - INTERVAL 1 YEAR) as count3,\
        (SELECT COUNT(*) FROM annotation_transcriptions  ) as count4\
        FROM DUAL\
        UNION ALL         \
        SELECT (SELECT COUNT(*) FROM annotation_tags  WHERE annotation_ts >= NOW() - INTERVAL 1 WEEK) as count1,\
        (SELECT COUNT(*) FROM annotation_tags  WHERE annotation_ts >= NOW() - INTERVAL 1 MONTH) as count2,\
        (SELECT COUNT(*) FROM annotation_tags  WHERE annotation_ts >= NOW() - INTERVAL 1 YEAR) as count3,\
        (SELECT COUNT(*) FROM annotation_tags  ) as count4\
        FROM DUAL) total"

[WebPages (Archives.gov, Presidential Libraries) in the last week]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.timeRangePicker.show = 0
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index=opa sourcetype=log4j_usage latest=now MainType=USAGE (Type=WebApp OR Type=API) Source={WebPages} | top limit=1000 url | fields url count | rename url as "Web Page", count as "Frequency"

[Total no. of Bytes served via the API]
action.email.reportServerEnabled = 0
action.email.useNSSubject = 1
alert.track = 0
display.general.type = statistics
display.visualizations.show = 0
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index=opa sourcetype=localhost_access_log-too_small bytesServed=* accessPath=*iapi* | stats sum(bytesServed) | eval Text="Total no. of Bytes served via the API" | fields Text sum(bytesServed) | rename sum(bytesServed) as Total

[Authority Records in the last week]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 16 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index="opa" earliest=-w latest=now MainType=USAGE (Type=WebApp OR Type=API) Source={AuthorityRecord} | top limit=1000 NaId | eval filename="http://research.archives.gov/id/".NaId | fields filename count | rename filename as "File Name", count as Frequency

[Authority Records since inception]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 16 * * 2
display.general.timeRangePicker.show = 0
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index=opa sourcetype=log4j_usage latest=now MainType=USAGE (Type=WebApp OR Type=API) Source={AuthorityRecord} | top limit=1000 NaId | eval filename="http://research.archives.gov/id/".NaId | fields filename count | rename filename as "File Name", count as "Frequency"

[WebPages (Archives.gov, Presidential Libraries) since inception]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.timeRangePicker.show = 0
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index=opa sourcetype=log4j_usage latest=now MainType=USAGE (Type=WebApp OR Type=API) Source={WebPages} | top limit=1000 url | fields url count | rename url as "Web Page", count as "Frequency"

[Number of times exports are generated through the API]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index="opa" sourcetype=log4j_opa apiType=api action=export  | top limit=0 apiType | eval Text="No. of times exports generated through the API" | fields Text count | rename count as Count

[Average number of contributions for the top 1000 contributors by contribution type]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 16 * * 2
display.general.timeRangePicker.show = 0
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = | dbquery opadb limit=1000 "SELECT REPLACE(REPLACE(annotation_type, 'TR', 'Transcriptions'), 'TG', 'Tags') AS 'Contribution Type', sum(contributions.totalContributions)/count(*) as Average FROM (SELECT account_id, annotation_type, count(*) AS totalContributions FROM annotation_log WHERE action IN ('new','update', 'add') GROUP BY account_id, annotation_type ORDER BY COUNT(*) DESC LIMIT 1000) AS contributions GROUP BY annotation_type"

[Top 1000 tags contributed by users and total number of links that tags have to records in OPA]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 17 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = | dbquery opadb limit=1000 "SELECT CAST(annotation AS Char(32)) as 'Tags', count(*) as 'Total no. of records tagged' FROM annotation_tags GROUP BY Tags ORDER BY count(*) desc"

[Exports Average by user]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 16 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index="opa" | stats count by username | stats avg(count) as average by username | sort average desc | rename average as "Average no. of exports"

[No. of times records are exported - By format]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 16 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = index="opa" MainType=USAGE Action=export | top limit=0 Format | eval Text="No. of times that records are exported from the system" | fields Format count | rename count as "Frequency", Format as "File Format"

[Number Of Registered Users who contributed by Contribution Type]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.reportServerEnabled = 0
action.email.sendcsv = 1
action.email.sendresults = 1
action.email.to = rasheda.uddin@nara.gov,\
anne.caouette@nara.gov,\
david.leistner@nara.gov
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 16 * * 2
display.general.type = statistics
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = | dbquery opadb limit=1000 \
"SELECT d_type as `Contribution Type`, count1 as 'THIS WEEK', count2 as 'THIS MONTH', count3 as 'THIS YEAR', count4 as 'SINCE INCEPTION'\
FROM (\
	SELECT 'Transcriptions' as d_type, (SELECT COUNT(DISTINCT account_id) FROM annotation_transcriptions WHERE annotation_ts >= NOW() - INTERVAL 1 WEEK) as count1, \
	                                  (SELECT COUNT(DISTINCT account_id) FROM annotation_transcriptions WHERE annotation_ts >= NOW() - INTERVAL 1 MONTH) as count2,\
                                          (SELECT COUNT(DISTINCT account_id) FROM annotation_transcriptions WHERE annotation_ts >= NOW() - INTERVAL 1 YEAR) as count3,\
                                          (SELECT COUNT(DISTINCT account_id) FROM annotation_transcriptions) as count4  \
        FROM DUAL\
	UNION ALL\
	SELECT 'Tags' as d_type, (SELECT COUNT(DISTINCT account_id) FROM annotation_tags WHERE annotation_ts >= NOW() - INTERVAL 1 WEEK) as count1,\
		                 (SELECT COUNT(DISTINCT account_id) FROM annotation_tags WHERE annotation_ts >= NOW() - INTERVAL 1 WEEK) as count2,\
                                 (SELECT COUNT(DISTINCT account_id) FROM annotation_tags WHERE annotation_ts >= NOW() - INTERVAL 1 YEAR) as count3,\
                                 (SELECT COUNT(DISTINCT account_id) FROM annotation_tags) as count4  \
        FROM DUAL\
) first\
UNION ALL\
SELECT 'All', sum(second.count1), sum(second.count2), sum(second.count3), sum(second.count4)\
FROM(\
	SELECT (SELECT COUNT(DISTINCT account_id) FROM annotation_transcriptions WHERE annotation_ts >= NOW() - INTERVAL 1 WEEK) as count1,\
	       (SELECT COUNT(DISTINCT account_id) FROM annotation_transcriptions WHERE annotation_ts >= NOW() - INTERVAL 1 MONTH) as count2,\
               (SELECT COUNT(DISTINCT account_id) FROM annotation_transcriptions WHERE annotation_ts >= NOW() - INTERVAL 1 YEAR) as count3,\
               (SELECT COUNT(DISTINCT account_id) FROM annotation_transcriptions) as count4\
	FROM DUAL\
	UNION ALL\
	SELECT (SELECT COUNT(DISTINCT account_id) FROM annotation_tags 	WHERE annotation_ts >= NOW() - INTERVAL 1 WEEK) as count1,\
	       (SELECT COUNT(DISTINCT account_id) FROM annotation_tags 	WHERE annotation_ts >= NOW() - INTERVAL 1 WEEK) as count2,\
               (SELECT COUNT(DISTINCT account_id) FROM annotation_tags WHERE annotation_ts >= NOW() - INTERVAL 1 YEAR) as count3,\
               (SELECT COUNT(DISTINCT account_id) FROM annotation_tags) as count4 \
	FROM DUAL\
) second\
UNION ALL\
SELECT 'Total Number of users contributed', COUNT(DISTINCT group1.account_id), COUNT(DISTINCT group2.account_id), COUNT(DISTINCT group3.account_id), COUNT(DISTINCT group4.account_id)\
FROM(	\
		SELECT DISTINCT account_id	FROM annotation_tags WHERE annotation_ts >= NOW() - INTERVAL 1 WEEK	\
		UNION ALL\
		SELECT DISTINCT account_id	FROM annotation_transcriptions	WHERE annotation_ts >= NOW() - INTERVAL 1 WEEK\
	) as group1,\
	(\
		SELECT DISTINCT account_id		FROM annotation_tags		WHERE annotation_ts >= NOW() - INTERVAL 1 MONTH\
		UNION ALL\
		SELECT DISTINCT account_id		FROM annotation_transcriptions		WHERE annotation_ts >= NOW() - INTERVAL 1 MONTH\
	) as group2,\
	(\
		SELECT DISTINCT account_id		FROM annotation_tags		WHERE annotation_ts >= NOW() - INTERVAL 1 YEAR\
		UNION ALL\
		SELECT DISTINCT account_id		FROM annotation_transcriptions		WHERE annotation_ts >= NOW() - INTERVAL 1 YEAR\
	) as group3,\
	(\
		SELECT DISTINCT account_id		FROM annotation_tags		\
		UNION ALL\
		SELECT DISTINCT account_id		FROM annotation_transcriptions\
	) as group4\
UNION ALL\
SELECT 'Average contributions per user', sum(second.count1)/group1.count, sum(second.count2)/group2.count, sum(second.count3)/group3.count, sum(second.count4)/group4.count\
FROM(\
	SELECT (SELECT COUNT(DISTINCT account_id) FROM annotation_transcriptions WHERE annotation_ts >= NOW() - INTERVAL 1 WEEK) as count1,\
	       (SELECT COUNT(DISTINCT account_id) FROM annotation_transcriptions WHERE annotation_ts >= NOW() - INTERVAL 1 MONTH) as count2,\
               (SELECT COUNT(DISTINCT account_id) FROM annotation_transcriptions WHERE annotation_ts >= NOW() - INTERVAL 1 YEAR) as count3,\
               (SELECT COUNT(DISTINCT account_id) FROM annotation_transcriptions) as count4\
	FROM DUAL\
	UNION ALL\
	SELECT (SELECT COUNT(DISTINCT account_id) FROM annotation_tags 	WHERE annotation_ts >= NOW() - INTERVAL 1 WEEK) as count1,\
	       (SELECT COUNT(DISTINCT account_id) FROM annotation_tags 	WHERE annotation_ts >= NOW() - INTERVAL 1 WEEK) as count2,\
               (SELECT COUNT(DISTINCT account_id) FROM annotation_tags WHERE annotation_ts >= NOW() - INTERVAL 1 YEAR) as count3,\
               (SELECT COUNT(DISTINCT account_id) FROM annotation_tags) as count4 \
	FROM DUAL\
) as second\
,\
(\
select COUNT(DISTINCT first.account_id) as count\
from\
	(SELECT DISTINCT account_id	FROM annotation_tags WHERE annotation_ts >= NOW() - INTERVAL 1 WEEK	\
	UNION\
	SELECT DISTINCT account_id	FROM annotation_transcriptions	WHERE annotation_ts >= NOW() - INTERVAL 1 WEEK) first\
) as group1,\
(\
select COUNT(DISTINCT first.account_id) as count\
from\
	(SELECT DISTINCT account_id		FROM annotation_tags		WHERE annotation_ts >= NOW() - INTERVAL 1 MONTH\
	UNION\
	SELECT DISTINCT account_id		FROM annotation_transcriptions		WHERE annotation_ts >= NOW() - INTERVAL 1 MONTH) first\
) as group2,\
(\
select COUNT(DISTINCT first.account_id) as count\
from\
	(SELECT DISTINCT account_id		FROM annotation_tags		WHERE annotation_ts >= NOW() - INTERVAL 1 YEAR\
	UNION\
	SELECT DISTINCT account_id		FROM annotation_transcriptions		WHERE annotation_ts >= NOW() - INTERVAL 1 YEAR) first\
) as group3,\
(\
select COUNT(DISTINCT first.account_id) as count\
from\
	(SELECT DISTINCT account_id		FROM annotation_tags		\
	UNION\
	SELECT DISTINCT account_id		FROM annotation_transcriptions) first\
) as group4\
"
